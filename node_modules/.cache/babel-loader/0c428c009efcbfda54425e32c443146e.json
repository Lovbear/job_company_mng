{"remainingRequest":"/Users/edz/BBt/job_company_mng/node_modules/babel-loader/lib/index.js!/Users/edz/BBt/job_company_mng/node_modules/eslint-loader/index.js??ref--13-0!/Users/edz/BBt/job_company_mng/src/unit/request.js","dependencies":[{"path":"/Users/edz/BBt/job_company_mng/src/unit/request.js","mtime":1583560429943},{"path":"/Users/edz/BBt/job_company_mng/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/edz/BBt/job_company_mng/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/edz/BBt/job_company_mng/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvZWR6L0JCdC9qb2JfY29tcGFueV9tbmcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyIpOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7Cgp2YXIgX2F4aW9zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJheGlvcyIpKTsKCnZhciBfZWxlbWVudFVpID0gcmVxdWlyZSgiZWxlbWVudC11aSIpOwoKdmFyIF9zdG9yZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi4vc3RvcmUiKSk7Cgp2YXIgX2F1dGggPSByZXF1aXJlKCJhdXRoLmpzIik7CgovLyDliJvlu7pheGlvc+WunuS+iwp2YXIgc2VydmljZSA9IF9heGlvcy5kZWZhdWx0LmNyZWF0ZSh7CiAgYmFzZVVSTDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSSwKICAvLyBhcGnnmoRiYXNlX3VybAogIHRpbWVvdXQ6IDE1MDAwIC8vIOivt+axgui2heaXtuaXtumXtAoKfSk7IC8vIHJlcXVlc3Tmi6bmiKrlmagKCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgaWYgKF9zdG9yZS5kZWZhdWx0LmdldHRlcnMudG9rZW4pIHsKICAgIGNvbmZpZy5oZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSAoMCwgX2F1dGguZ2V0VG9rZW4pKCk7IC8vIOiuqeavj+S4quivt+axguaQuuW4puiHquWumuS5iXRva2VuIOivt+agueaNruWunumZheaDheWGteiHquihjOS/ruaUuQogIH0KCiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgLy8gRG8gc29tZXRoaW5nIHdpdGggcmVxdWVzdCBlcnJvcgogIGNvbnNvbGUubG9nKGVycm9yKTsgLy8gZm9yIGRlYnVnCgogIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7IC8vIHJlc3BvbmXmi6bmiKrlmagKCnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAvKioKICAqIGNvZGXkuLrpnZ4yMDDmmK/mipvplJkg5Y+v57uT5ZCI6Ieq5bex5Lia5Yqh6L+b6KGM5L+u5pS5CiAgKi8KICB2YXIgcmVzID0gcmVzcG9uc2UuZGF0YTsKCiAgaWYgKHJlcy5jb2RlICE9PSAyMDApIHsKICAgICgwLCBfZWxlbWVudFVpLk1lc3NhZ2UpKHsKICAgICAgbWVzc2FnZTogcmVzLm1lc3NhZ2UsCiAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgIGR1cmF0aW9uOiAzICogMTAwMAogICAgfSk7IC8vIDQwMTrmnKrnmbvlvZU7CiAgICAvLyBpZiAocmVzLmNvZGUgPT09IDQwMSkgewogICAgLy8gICBNZXNzYWdlQm94LmNvbmZpcm0oJ+S9oOW3suiiq+eZu+WHuu+8jOWPr+S7peWPlua2iOe7p+e7reeVmeWcqOivpemhtemdou+8jOaIluiAhemHjeaWsOeZu+W9lScsICfnoa7lrprnmbvlh7onLCB7CiAgICAvLyAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfph43mlrDnmbvlvZUnLAogICAgLy8gICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgLy8gICAgIHR5cGU6ICd3YXJuaW5nJwogICAgLy8gICB9KS50aGVuKCgpID0+IHsKICAgIC8vICAgICBzdG9yZS5kaXNwYXRjaCgnRmVkTG9nT3V0JykudGhlbigoKSA9PiB7CiAgICAvLyAgICAgICBsb2NhdGlvbi5yZWxvYWQoKS8vIOS4uuS6humHjeaWsOWunuS+i+WMlnZ1ZS1yb3V0ZXLlr7nosaEg6YG/5YWNYnVnCiAgICAvLyAgICAgfSkKICAgIC8vICAgfSkKICAgIC8vIH0KCiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoJ2Vycm9yJyk7CiAgfSBlbHNlIHsKICAgIHJldHVybiByZXNwb25zZS5kYXRhOwogIH0KfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgY29uc29sZS5sb2coJ2VycicgKyBlcnJvcik7IC8vIGZvciBkZWJ1ZwoKICAoMCwgX2VsZW1lbnRVaS5NZXNzYWdlKSh7CiAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLAogICAgdHlwZTogJ2Vycm9yJywKICAgIGR1cmF0aW9uOiAzICogMTAwMAogIH0pOwogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwp2YXIgX2RlZmF1bHQgPSBzZXJ2aWNlOwpleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDs="},{"version":3,"sources":["/Users/edz/BBt/job_company_mng/src/unit/request.js"],"names":["service","axios","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","config","store","getters","token","headers","error","console","log","Promise","reject","response","res","data","code","message","type","duration"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;AACA,IAAMA,OAAO,GAAGC,eAAMC,MAAN,CAAa;AAC3BC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBADM;AACY;AACvCC,EAAAA,OAAO,EAAE,KAFkB,CAEZ;;AAFY,CAAb,CAAhB,C,CAKA;;;AACAP,OAAO,CAACQ,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CAAiC,UAAAC,MAAM,EAAI;AACzC,MAAIC,eAAMC,OAAN,CAAcC,KAAlB,EAAyB;AACzBH,IAAAA,MAAM,CAACI,OAAP,CAAe,eAAf,IAAkC,qBAAlC,CADyB,CACoB;AAC5C;;AACD,SAAOJ,MAAP;AACD,CALD,EAKG,UAAAK,KAAK,EAAI;AACV;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ,EAFU,CAES;;AACnBG,EAAAA,OAAO,CAACC,MAAR,CAAeJ,KAAf;AACD,CATD,E,CAWA;;AACAhB,OAAO,CAACQ,YAAR,CAAqBa,QAArB,CAA8BX,GAA9B,CACE,UAAAW,QAAQ,EAAI;AACZ;;;AAGE,MAAMC,GAAG,GAAGD,QAAQ,CAACE,IAArB;;AACA,MAAID,GAAG,CAACE,IAAJ,KAAa,GAAjB,EAAsB;AACpB,4BAAQ;AACNC,MAAAA,OAAO,EAAEH,GAAG,CAACG,OADP;AAENC,MAAAA,IAAI,EAAE,OAFA;AAGNC,MAAAA,QAAQ,EAAE,IAAI;AAHR,KAAR,EADoB,CAOpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,WAAOR,OAAO,CAACC,MAAR,CAAe,OAAf,CAAP;AACD,GApBD,MAoBO;AACL,WAAOC,QAAQ,CAACE,IAAhB;AACD;AACF,CA7BH,EA8BE,UAAAP,KAAK,EAAI;AACPC,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAQF,KAApB,EADO,CACmB;;AAC1B,0BAAQ;AACNS,IAAAA,OAAO,EAAET,KAAK,CAACS,OADT;AAENC,IAAAA,IAAI,EAAE,OAFA;AAGNC,IAAAA,QAAQ,EAAE,IAAI;AAHR,GAAR;AAKA,SAAOR,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CAtCH;eAyCehB,O","sourcesContent":["import axios from 'axios'\nimport { Message, MessageBox } from 'element-ui'\nimport store from '../store'\nimport { getToken } from \"auth.js\";\n// 创建axios实例\nconst service = axios.create({\n  baseURL: process.env.VUE_APP_BASE_API, // api的base_url\n  timeout: 15000 // 请求超时时间\n})\n\n// request拦截器\nservice.interceptors.request.use(config => {\n  if (store.getters.token) {\n\t\tconfig.headers['Authorization'] = getToken() // 让每个请求携带自定义token 请根据实际情况自行修改\n  }\n  return config\n}, error => {\n  // Do something with request error\n  console.log(error) // for debug\n  Promise.reject(error)\n})\n\n// respone拦截器\nservice.interceptors.response.use(\n  response => {\n  /**\n  * code为非200是抛错 可结合自己业务进行修改\n  */\n    const res = response.data\n    if (res.code !== 200) {\n      Message({\n        message: res.message,\n        type: 'error',\n        duration: 3 * 1000\n      })\n\n      // 401:未登录;\n      // if (res.code === 401) {\n      //   MessageBox.confirm('你已被登出，可以取消继续留在该页面，或者重新登录', '确定登出', {\n      //     confirmButtonText: '重新登录',\n      //     cancelButtonText: '取消',\n      //     type: 'warning'\n      //   }).then(() => {\n      //     store.dispatch('FedLogOut').then(() => {\n      //       location.reload()// 为了重新实例化vue-router对象 避免bug\n      //     })\n      //   })\n      // }\n      return Promise.reject('error')\n    } else {\n      return response.data\n    }\n  },\n  error => {\n    console.log('err' + error)// for debug\n    Message({\n      message: error.message,\n      type: 'error',\n      duration: 3 * 1000\n    })\n    return Promise.reject(error)\n  }\n)\n\nexport default service\n"]}]}